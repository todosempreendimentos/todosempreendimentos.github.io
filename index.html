
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Parceiros Cartão de TODOS</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-0bd89dd3.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-120af167.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

  </head>

  <body class="index" data-languages="[&quot;csharp&quot;,&quot;javascript&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-7e0a7c02.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="csharp">csharp</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Pesquisar">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introducao" class="toc-h1 toc-link" data-title="Introdução">Introdução</a>
          </li>
          <li>
            <a href="#api-parceiros" class="toc-h1 toc-link" data-title="API Parceiros">API Parceiros</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introducao-2" class="toc-h2 toc-link" data-title="Introdução">Introdução</a>
                  </li>
                  <li>
                    <a href="#autenticacao" class="toc-h2 toc-link" data-title="Autenticação">Autenticação</a>
                  </li>
                  <li>
                    <a href="#consultas" class="toc-h2 toc-link" data-title="Consultas">Consultas</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-filiados" class="toc-h1 toc-link" data-title="API Filiados">API Filiados</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introducao-3" class="toc-h2 toc-link" data-title="Introdução">Introdução</a>
                  </li>
                  <li>
                    <a href="#autenticacao-2" class="toc-h2 toc-link" data-title="Autenticação">Autenticação</a>
                  </li>
                  <li>
                    <a href="#dicionario-de-dados" class="toc-h2 toc-link" data-title="Dicionário de Dados">Dicionário de Dados</a>
                  </li>
                  <li>
                    <a href="#arrecadacao-de-lancamentos" class="toc-h2 toc-link" data-title="Arrecadação de Lançamentos">Arrecadação de Lançamentos</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#erros" class="toc-h1 toc-link" data-title="Erros">Erros</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#erros-2" class="toc-h2 toc-link" data-title="Erros">Erros</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:suporte@cartaodetodos.com.br?Subject=Solicitação de Credenciamento'>Credenciamento</a></li>
            <li><a href='#'>TODOS Empreendimentos</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introducao'>Introdução</h1>
<p>Bem-vindo ao portal de documentação das API&#39;s da TODOS Empreendimentos. O objetivo é você conseguir explorar as maneiras de utilização das API&#39;s disponibilizadas.</p>

<ul>
<li><a href='#api-parceiros'>API Parceiros</a></li>
<li><a href='#api-filiados'>API Filiados</a></li>
</ul>

<p>O mecanismo de integração com o Cartão de TODOS é simples, de modo que apenas conhecimentos intermediários em linguagem de programação para Web, requisições HTTP/HTTPS e manipulação de arquivos JSON, são necessários para implantar a solução Cartão de TODOS com sucesso.</p>
<h1 id='api-parceiros'>API Parceiros</h1><h2 id='introducao-2'>Introdução</h2>
<p>O objetivo desta documentação é orientar o desenvolvedor sobre como integrar com a <strong>API Parceiros Cartão de TODOS</strong>, descrevendo as funcionalidades, os métodos a serem utilizados, listando informações a serem enviadas e recebidas, e provendo exemplos.</p>

<p>Nesse manual você encontrará a referência sobre todas as operações disponíveis na API REST de integração Cartão de TODOS. Estas operações devem ser executadas utilizando seu token específico nos respectivos endpoints dos ambientes:</p>

<table><thead>
<tr>
<th>SANDBOX</th>
<th>PRODUÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td>http://sandbox.sistematodos.com.br:81/integracao</td>
<td>https://api.cartaodetodos.com.br/</td>
</tr>
</tbody></table>
<h2 id='autenticacao'>Autenticação</h2>
<blockquote>
<p>Para autorização, use este código:</p>
</blockquote>
<div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"http://sandbox.sistematodos.com.br:81/api/filiado/10669447684/ctn"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"Bearer B4C7AB108191735504990B41D18F1EDBEC14891AC5CC59E0CC7A006888DF"</span><span class="p">);</span>

<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">http://sandbox.sistematodos.com.br:81/api/filiado/10669447684/ctn</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Bearer B4C7AB108191735504990B41D18F1EDBEC14891AC5CC59E0CC7A006888DF</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

</code></pre></div>
<blockquote>
</blockquote>

<p>Para realizar a autenticação você sempre deverá enviar seu token no cabeçalho em todas as suas requisições, conforme abaixo.</p>

<p><code>Authorization: Bearer B4C7AB108191735504990B41D18F1EDBEC14891AC5CC59E0CC7A006888DF</code></p>

<aside class="notice">
Você deve substituir <code>B4C7AB108191735504990B41D18F1EDBEC14891AC5CC59E0CC7A006888DF</code> por seu token.
</aside>
<h2 id='consultas'>Consultas</h2>
<p>Veremos abaixo os métodos para consulta na API Parceiros, seus parâmetros e rotas para os três sistemas do Cartão de TODOS: CartãoNet, Clube de Vantagens da família e IPS colômbia.</p>

<p><strong>Matrícula/CPF</strong></p>
<div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"http://sandbox.sistematodos.com.br:81/integracao/api/filiado/60362238626/ctn"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"Bearer B4C7AB108191735504990B41D18F1EDBEC14891AC5CC59E0CC7A006888DF"</span><span class="p">);</span>

<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">http://sandbox.sistematodos.com.br:81/integracao/api/filiado/60362238626/ctn</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Bearer B4C7AB108191735504990B41D18F1EDBEC14891DC5CC59E0CC7D106888DF</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>A requisição irá retornar o seguinte JSON:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"mensagem"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"idFiliado"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idPessoa"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"matricula"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nomeFiliado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dataNascimento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-17T18:26:46.865Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cpf"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idTipoSituacaoFinanceira"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idStatusFiliado"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nomeFranquia"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endereco"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bairro"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cidade"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"uf"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"telefone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"celular"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">      
      </span><span class="nl">"sistema"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idFranquia"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idFiliadoPai"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tipoSituacaoFinanceira"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"statusFiliado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tipoFiliado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"permiteDesconto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"quantidade"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>A rota da pesquisa por matrícula ou CPF é </p>

<p><strong>Requisição HTTP</strong> </p>

<p><code>GET /api/filiado/{matriculaCpf}/{sistema}</code></p>

<p><code>Exemplo Matrícula: GET /api/filiado/MG046049495/ctn</code></p>

<p><code>Exemplo CPF: GET /api/filiado/60362238626/ctn</code></p>

<p><strong>•   MatriculaCPF:</strong> Número da matrícula ou CPF do filiado. </p>

<p><strong>Retorno</strong></p>

<table><thead>
<tr>
<th>PROPRIEDADE</th>
<th>TIPO</th>
<th>TAMANHO</th>
<th>DESCRIÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td><code>Mensagem</code></td>
<td>String</td>
<td>-</td>
<td>Mensagem de retorno.</td>
</tr>
<tr>
<td><code>idFiliado</code></td>
<td>Int</td>
<td>-</td>
<td>Número de identificação do filiado.</td>
</tr>
<tr>
<td><code>idPessoa</code></td>
<td>Int</td>
<td>-</td>
<td>Número de identificação da pessoa.</td>
</tr>
<tr>
<td><code>matricula</code></td>
<td>String</td>
<td>12</td>
<td>Matrícula ou CPF do filiado.</td>
</tr>
<tr>
<td><code>nomeFiliado</code></td>
<td>String</td>
<td>-</td>
<td>Nome do filiado. Deve conter no mínimo 3 caracteres. A pesquisa por nome sempre irá retornar os primeiros 20 resultados.</td>
</tr>
<tr>
<td><code>dataNascimento</code></td>
<td>Datetime</td>
<td>yyyy-mm-dd</td>
<td>Data de nascimento do filiado.</td>
</tr>
<tr>
<td><code>cpf</code></td>
<td>String</td>
<td>11</td>
<td>Número do CPF do filiado.</td>
</tr>
<tr>
<td><code>idTipoSituacaoFinanceira</code></td>
<td>Int</td>
<td>-</td>
<td>Qual a situação financeira do filiado.</td>
</tr>
<tr>
<td><code>idStatusFiliado</code></td>
<td>Int</td>
<td>-</td>
<td>Identificação do status do filiado.</td>
</tr>
<tr>
<td><code>nomeFranquia</code></td>
<td>String</td>
<td>-</td>
<td>Nome da franquia em que o filiado esta cadastrado.</td>
</tr>
<tr>
<td><code>endereco</code></td>
<td>String</td>
<td>-</td>
<td>Nome da rua do filiado.</td>
</tr>
<tr>
<td><code>numero</code></td>
<td>String</td>
<td>-</td>
<td>Número do endereço do filiado.</td>
</tr>
<tr>
<td><code>bairro</code></td>
<td>String</td>
<td>-</td>
<td>Nome do bairro do filiado.</td>
</tr>
<tr>
<td><code>cidade</code></td>
<td>String</td>
<td>-</td>
<td>Nome da cidade do filiado.</td>
</tr>
<tr>
<td><code>uf</code></td>
<td>String</td>
<td>2</td>
<td>Nome do estado do filiado.</td>
</tr>
<tr>
<td><code>telefone</code></td>
<td>String</td>
<td>10</td>
<td>Número de telefone do filiado.</td>
</tr>
<tr>
<td><code>celular</code></td>
<td>String</td>
<td>11</td>
<td>Número de celular do filiado.</td>
</tr>
<tr>
<td><code>sistema</code></td>
<td>Int</td>
<td>3</td>
<td>Sigla do sistema.</td>
</tr>
<tr>
<td><code>idFranquia</code></td>
<td>Int</td>
<td>-</td>
<td>Número de identificação da franquia.</td>
</tr>
<tr>
<td><code>idFiliadoPai</code></td>
<td>Int</td>
<td>-</td>
<td>Identificação do titular do contrato.</td>
</tr>
<tr>
<td><code>tipoSituacaoFinanceira</code></td>
<td>String</td>
<td>-</td>
<td>Status da situação financeira do filiado (Adimplente, inadimplente etc).</td>
</tr>
<tr>
<td><code>statusFiliado</code></td>
<td>String</td>
<td>-</td>
<td>Status do filiado (Ativo, desfiliado etc).</td>
</tr>
<tr>
<td><code>tipoFiliado</code></td>
<td>String</td>
<td>-</td>
<td>Informa se é o titular ou dependente do contrato.</td>
</tr>
<tr>
<td><code>permiteDesconto</code></td>
<td>Boolean</td>
<td>-</td>
<td>Se o desconto é permitido (true/false).</td>
</tr>
<tr>
<td><code>quantidade</code></td>
<td>Int</td>
<td>-</td>
<td>Quantidade de itens dentro do array dados.</td>
</tr>
</tbody></table>

<p><strong>Nome</strong></p>
<div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"http://sandbox.sistematodos.com.br:81/integracao/api/filiado/pesquisa/lorenna/ctn"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"Bearer B4C7AB108191735504990B41D18F1EDBEC14891BC5CC59E0CC7A106888DF"</span><span class="p">);</span>

<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">http://sandbox.sistematodos.com.br:81/integracao/api/filiado/pesquisa/lorenna/ctn</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Bearer B4C7AB108191735504990B41D18F1EDBEC14891DC5CC59F0CC7D106888DF</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>A requisição irá retornar o seguinte JSON:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"mensagem"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"idFiliado"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idPessoa"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"matricula"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nomeFiliado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dataNascimento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-17T18:33:31.200Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cpf"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idTipoSituacaoFinanceira"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idStatusFiliado"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nomeFranquia"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endereco"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bairro"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cidade"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"uf"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"telefone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"celular"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">      
      </span><span class="nl">"sistema"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idFranquia"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"idFiliadoPai"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tipoSituacaoFinanceira"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"statusFiliado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tipoFiliado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"permiteDesconto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"quantidade"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>A rota da pesquisa por nome é </p>

<p><strong>Requisição HTTP</strong> </p>

<p><code>GET /api/filiado/pesquisa/{nome}/{sistema}</code></p>

<p><code>Exemplo: GET /api/filiado/pesquisa/lorenna/ctn</code></p>

<p><strong>•   Nome:</strong> Nome do filiado. </p>

<p><strong>Retorno</strong></p>

<table><thead>
<tr>
<th>PROPRIEDADE</th>
<th>TIPO</th>
<th>TAMANHO</th>
<th>DESCRIÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td><code>Mensagem</code></td>
<td>String</td>
<td>-</td>
<td>Mensagem de retorno.</td>
</tr>
<tr>
<td><code>idFiliado</code></td>
<td>Int</td>
<td>-</td>
<td>Número de identificação do filiado.</td>
</tr>
<tr>
<td><code>idPessoa</code></td>
<td>Int</td>
<td>-</td>
<td>Número de identificação da pessoa.</td>
</tr>
<tr>
<td><code>matricula</code></td>
<td>String</td>
<td>12</td>
<td>Matrícula ou CPF do filiado.</td>
</tr>
<tr>
<td><code>nomeFiliado</code></td>
<td>String</td>
<td>-</td>
<td>Deve conter no mínimo 3 caracteres. A pesquisa por nome sempre irá retornar os primeiros 20 resultados.</td>
</tr>
<tr>
<td><code>dataNascimento</code></td>
<td>Datetime</td>
<td>yyyy-mm-dd</td>
<td>Data de nascimento do filiado.</td>
</tr>
<tr>
<td><code>cpf</code></td>
<td>String</td>
<td>11</td>
<td>Número do CPF do filiado.</td>
</tr>
<tr>
<td><code>idTipoSituacaoFinanceira</code></td>
<td>Int</td>
<td>-</td>
<td>Qual a situação financeira do filiado.</td>
</tr>
<tr>
<td><code>idStatusFiliado</code></td>
<td>Int</td>
<td>-</td>
<td>Identificação do status do filiado.</td>
</tr>
<tr>
<td><code>nomeFranquia</code></td>
<td>String</td>
<td>-</td>
<td>Nome da franquia em que o filiado esta cadastrado.</td>
</tr>
<tr>
<td><code>endereco</code></td>
<td>String</td>
<td>-</td>
<td>Nome da rua do filiado.</td>
</tr>
<tr>
<td><code>numero</code></td>
<td>String</td>
<td>-</td>
<td>Número do endereço do filiado.</td>
</tr>
<tr>
<td><code>bairro</code></td>
<td>String</td>
<td>-</td>
<td>Nome do bairro do filiado.</td>
</tr>
<tr>
<td><code>cidade</code></td>
<td>String</td>
<td>-</td>
<td>Nome da cidade do filiado.</td>
</tr>
<tr>
<td><code>uf</code></td>
<td>String</td>
<td>2</td>
<td>Nome do estado do filiado.</td>
</tr>
<tr>
<td><code>telefone</code></td>
<td>String</td>
<td>10</td>
<td>Número de telefone do filiado.</td>
</tr>
<tr>
<td><code>celular</code></td>
<td>String</td>
<td>11</td>
<td>Número de celular do filiado.</td>
</tr>
<tr>
<td><code>sistema</code></td>
<td>Int</td>
<td>3</td>
<td>Sigla do sistema.</td>
</tr>
<tr>
<td><code>idFranquia</code></td>
<td>Int</td>
<td>-</td>
<td>Número de identificação da franquia.</td>
</tr>
<tr>
<td><code>idFiliadoPai</code></td>
<td>Int</td>
<td>-</td>
<td>Identificação do titular do contrato.</td>
</tr>
<tr>
<td><code>tipoSituacaoFinanceira</code></td>
<td>String</td>
<td>-</td>
<td>Status da situação financeira do filiado (Adimplente, inadimplente etc).</td>
</tr>
<tr>
<td><code>statusFiliado</code></td>
<td>String</td>
<td>-</td>
<td>Status do filiado (Ativo, desfiliado etc).</td>
</tr>
<tr>
<td><code>tipoFiliado</code></td>
<td>String</td>
<td>-</td>
<td>Informa se é o titular ou dependente do contrato.</td>
</tr>
<tr>
<td><code>permiteDesconto</code></td>
<td>Boolean</td>
<td>-</td>
<td>Se o desconto é permitido (true/false).</td>
</tr>
<tr>
<td><code>quantidade</code></td>
<td>Int</td>
<td>-</td>
<td>Quantidade de itens dentro do array dados.</td>
</tr>
</tbody></table>
<h1 id='api-filiados'>API Filiados</h1><h2 id='introducao-3'>Introdução</h2>
<p>O objetivo desta documentação é orientar o desenvolvedor sobre como integrar com a <strong>API Filiado Cartão de TODOS</strong>, descrevendo as funcionalidades, os métodos a serem utilizados, listando informações a serem enviadas e recebidas, e provendo exemplos.</p>

<p>Nesse manual você encontrará a referência sobre todas as operações disponíveis na API REST Filiado Cartão de TODOS. Estas operações devem ser executadas utilizando seu token específico nos respectivos endpoints dos ambientes:</p>

<table><thead>
<tr>
<th>SANDBOX</th>
<th>PRODUÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td>https://homologacao.sistematodos.com.br/api.filiado</td>
<td>https://filiado.sistematodos.com.br</td>
</tr>
</tbody></table>
<h3 id='identificacao-do-produto'>Identificação do produto</h3>
<p>Todas as requisições devem conter a identificação do produto no cabeçalho. A identificação será efetuada da seguinte forma:</p>

<p><code>Produto: 1</code></p>

<table><thead>
<tr>
<th>PRODUTO</th>
<th>CÓDIGO</th>
</tr>
</thead><tbody>
<tr>
<td>Cartão de TODOS</td>
<td>1</td>
</tr>
<tr>
<td>Clube de Vantagens da Família</td>
<td>2</td>
</tr>
<tr>
<td>IPS de TODOS Colômbia</td>
<td>3</td>
</tr>
</tbody></table>
<h2 id='autenticacao-2'>Autenticação</h2>
<blockquote>
<p>Para autorização, use este código:</p>
</blockquote>
<div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://login.cartaodetodos.com.br/connect/token"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>

<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"grant_type"</span><span class="p">,</span> <span class="s">"client_credentials"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"scope"</span><span class="p">,</span> <span class="s">"apifiliado apifiliado:baixa"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"client_id"</span><span class="p">,</span> <span class="s">"{SeuClientID}"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"client_secret"</span><span class="p">,</span> <span class="s">"{SeuClientSecret}"</span><span class="p">);</span>

<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">grant_type=client_credentials&amp;scope=apifiliado%20apifiliado%3Abaixa&amp;client_id=&amp;client_secret=</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://login.cartaodetodos.com.br/connect/token</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/x-www-form-urlencoded</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

</code></pre></div>
<blockquote>
<p>A requisição irá retornar o seguinte JSON:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{SeuAccess_token}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apifiliado apifiliado:baixa"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
</blockquote>

<p>A aplicação solicita um token de acesso enviando suas credenciais, seu <code>client_id</code> e <code>client_secret</code>, para o servidor de autorização. Um exemplo de solicitação POST poderia se parecer com o que se encontra ao lado:</p>

<p>Se as credenciais da aplicação forem verificadas, o servidor de autorização retorna um token de acesso para a aplicação. Agora a aplicação está autorizada a utilizar sua própria conta!</p>

<aside class="notice">
Você deve substituir {SeuClientID} por seu <code>client_id</code> e {SeuClientSecret} por seu <code>client_secret</code>.
</aside>

<p>Uma vez obtido o token de acesso, ele poderá ser utilizado para acesso à API, limitado ao escopo informado, até que o token expire ou seja revogado.</p>

<aside class="notice">
Na chave {SeuAccess_token} no retorno será apresentado o seu Token.
</aside>

<p>Para consumir a API é necessário informar o <code>access_token</code> no cabeçalho de <strong>todas</strong> as requisições.</p>
<h2 id='dicionario-de-dados'>Dicionário de Dados</h2>
<p><strong>Serviços</strong></p>

<table><thead>
<tr>
<th>SERVIÇO</th>
<th>IDENTIFICAÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td><code>Mensalidade</code></td>
<td>mensalidade</td>
</tr>
<tr>
<td><code>Adesão</code></td>
<td>adesão</td>
</tr>
</tbody></table>

<p><br></p>

<p><strong>Forma de Pagamento Colômbia</strong></p>

<table><thead>
<tr>
<th>ID</th>
<th>FORMA DE PAGAMENTO</th>
</tr>
</thead><tbody>
<tr>
<td><code>5301083</code></td>
<td>PAYVALIDA - BALOTO</td>
</tr>
<tr>
<td><code>5301085</code></td>
<td>PAYVALIDA - EFECTY</td>
</tr>
</tbody></table>
<h2 id='arrecadacao-de-lancamentos'>Arrecadação de Lançamentos</h2><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://homologacao.sistematodos.com.br/api.filiado/lancamentos/baixa"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>

<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Produto"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer {Seu access_token}"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="k">new</span> <span class="p">{</span>
    <span class="n">valorDesconto</span><span class="p">:</span> <span class="m">10</span><span class="p">,</span>
    <span class="n">idFiliado</span><span class="p">:</span> <span class="m">22916173</span><span class="p">,</span>
    <span class="n">idFormaPagamento</span><span class="p">:</span> <span class="m">18</span><span class="p">,</span>
    <span class="n">referencia</span><span class="p">:</span> <span class="s">"2020/08"</span><span class="p">,</span>
    <span class="n">logUsuario</span><span class="p">:</span> <span class="s">"log usuario"</span><span class="p">,</span>
    <span class="n">servico</span><span class="p">:</span> <span class="s">"mensalidade"</span>
<span class="p">});</span>

<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="dl">"</span><span class="s2">idLancamento</span><span class="dl">"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="dl">"</span><span class="s2">valorDesconto</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="dl">"</span><span class="s2">historico</span><span class="dl">"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="dl">"</span><span class="s2">idFiliado</span><span class="dl">"</span><span class="p">:</span><span class="mi">22916173</span><span class="p">,</span><span class="dl">"</span><span class="s2">idFormaPagamento</span><span class="dl">"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="dl">"</span><span class="s2">referencia</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">2020/08</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logUsuario</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">maisTodos</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">servico</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">mensalidade</span><span class="dl">"</span><span class="p">});</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://localhost:5001/lancamentos/baixa</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Produto</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

</code></pre></div><div class="highlight"><pre class="highlight py tab-python"><code>
<span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">mimetypes</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"localhost"</span><span class="p">,</span> <span class="mi">5001</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">idLancamento</span><span class="se">\"</span><span class="s">: null,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">valorDesconto</span><span class="se">\"</span><span class="s">:10,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">historico</span><span class="se">\"</span><span class="s">: null,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">idFiliado</span><span class="se">\"</span><span class="s">: 22916173,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">idFormaPagamento</span><span class="se">\"</span><span class="s">: 18,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">referencia</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">2020/08</span><span class="se">\"</span><span class="s">,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">logUsuario</span><span class="se">\"</span><span class="s"> : </span><span class="se">\"</span><span class="s">maisTodos</span><span class="se">\"</span><span class="s">,</span><span class="se">\r\n</span><span class="s">  </span><span class="se">\"</span><span class="s">servico</span><span class="se">\"</span><span class="s"> : </span><span class="se">\"</span><span class="s">mensalidade</span><span class="se">\"\r\n</span><span class="s">}"</span>

<span class="n">headers</span> <span class="o">=</span> 
  <span class="p">{</span>
    <span class="s">'Produto'</span><span class="p">:</span> <span class="s">'1'</span><span class="p">,</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
  <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/lancamentos/baixa"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>

</code></pre></div>
<blockquote>
<p>A requisição irá retornar o seguinte JSON caso  sucesso:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baixa armazenada para processamento."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"46_7cb053a67f1146ff9828b27fb052c4b0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"46_e55a4101accb4900bdf90f60c70f8681"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>A requisição irá retornar o seguinte JSON caso houver erro:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Descrição do erro"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Requisição HTTP</strong> </p>

<p><code>POST /Lancamentos/baixa</code></p>
<h3 id='entrada'>Entrada</h3>
<table><thead>
<tr>
<th>PROPRIEDADE</th>
<th>TIPO</th>
<th>TAMANHO</th>
<th>DESCRIÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td><code>idFiliado</code></td>
<td>Int</td>
<td>-</td>
<td>Identificação do Filiado.</td>
</tr>
<tr>
<td><code>referencia</code></td>
<td>String</td>
<td>7</td>
<td>Referência do lançamento. Formato <strong>yyyy/MM</strong> (Ex.: 2020/10)</td>
</tr>
<tr>
<td><code>servico</code></td>
<td>String</td>
<td>16</td>
<td>Identificação do serviço. Conforme o <a href='#dicionario-de-dados'>dicionário de dados</a>.</td>
</tr>
<tr>
<td><code>logusuario</code></td>
<td>String</td>
<td>56</td>
<td>Nome a ser salvo no log do lançamento.</td>
</tr>
<tr>
<td><code>idFormaPagamento</code></td>
<td>Int</td>
<td>-</td>
<td>Identificação da forma de pagamento.</td>
</tr>
</tbody></table>
<h3 id='retorno'>Retorno</h3>
<table><thead>
<tr>
<th>PROPRIEDADE</th>
<th>TIPO</th>
<th>TAMANHO</th>
<th>DESCRIÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td><code>success</code></td>
<td>Boolean</td>
<td>-</td>
<td>Retorno de verdadeiro ou falso de acordo com a operação.</td>
</tr>
<tr>
<td><code>message</code></td>
<td>String</td>
<td>-</td>
<td>Mensagem de retorno.</td>
</tr>
<tr>
<td><code>data</code></td>
<td>String</td>
<td>-</td>
<td>Identificações dos lançamentos salvos para processamento.</td>
</tr>
</tbody></table>
<h1 id='erros'>Erros</h1>
<p>Nossas API&#39;s utilizam os seguintes códigos de erro:</p>
<h3 id='erros-2'>Erros</h3>
<table><thead>
<tr>
<th>Erro</th>
<th>Significado</th>
</tr>
</thead><tbody>
<tr>
<td><code>200</code></td>
<td>OK -- Sucesso.</td>
</tr>
<tr>
<td><code>201</code></td>
<td>Created -- Registo incluido.</td>
</tr>
<tr>
<td><code>400</code></td>
<td>Bad Request -- Sua solicitação é inválida.</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Unauthorized -- Sua chave de API está errada.</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Forbidden -- Você tentou acessar um recurso não autorizado.</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Not Found -- Não encontrado.</td>
</tr>
<tr>
<td><code>405</code></td>
<td>Method Not Allowed -- Você tentou acessar um método não permitido.</td>
</tr>
<tr>
<td><code>500</code></td>
<td>Internal Server Error -- Nós tivemos um problema com nosso servidor, tente mais tarde. Caso persista, entre em contato.</td>
</tr>
<tr>
<td><code>503</code></td>
<td>Service Unavailable -- Estamos temporariamente off-line para manutenção. Por favor, tente novamente mais tarde</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="csharp">csharp</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
